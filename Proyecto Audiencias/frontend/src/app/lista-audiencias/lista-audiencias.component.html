<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Audiencias</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body>

<nav class="navbar navbar-expand-lg px-4">
    <div class="container-fluid">
        <span class="navbar-brand">GESTIÓN DE AUDIENCIAS</span>
        <a href="#" class="btn btn-outline-secondary" [routerLink]="'/crear-audiencia'">+ Nuevo</a>

    </div>
</nav>

<div class="container mt-4">
    <h2 class="text-white bg-dark p-2 text-center d-flex justify-content-between align-items-center">
        Consulta de Audiencias
        <button (click)="toggleFormulario()" class="btn btn-light">
            {{ mostrarFormulario ? '▲' : '▼' }}
        </button>
    </h2>

    <!-- Formulario de búsqueda -->
    <div *ngIf="mostrarFormulario" class="p-3 bg-light border rounded">
        <div class="row mb-3">
            <div class="col-md-6">
                <label>Distrito Judicial</label>
                <select [(ngModel)]="distritoSeleccionado" (change)="actualizarSalas()" class="form-control">
                    <option value="">Seleccione</option>
                    <option value="03 Venado Tuerto">03 Venado Tuerto</option>
                    <option value="04 Reconquista">04 Reconquista</option>
                    <option value="11 San Jorge">11 San Jorge</option>
                </select>
            </div>
            <div class="col-md-6">
                <label>Instancia</label>
                <select class="form-control">
                    <option value="">Seleccione</option>
                    <option value="Primera">Primera Instancia</option>
                    <option value="Segunda">Segunda Instancia</option>
                    <option value="Apelacion">Cámara de Apelaciones</option>
                </select>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label>Sala</label>
                <select [(ngModel)]="salaSeleccionada" class="form-control">
                    <option value="">Seleccione</option>
                    <option *ngFor="let sala of salasDisponibles" [value]="sala">{{ sala }}</option>
                </select>
            </div>
            <div class="col-md-6">
                <label>Fecha</label>
                <input type="date" class="form-control" [(ngModel)]="fechaSeleccionada">
            </div>
        </div>
        <button (click)="filtrarAudiencias()" class="btn btn-primary">Buscar</button>
    </div>

    <!-- Tabla de audiencias -->
    <div class="consulta-box mt-3">
        <table class="table table-bordered text-center">
            <thead>
                <tr>
                    <th>Hora Inicio</th>
                    <th>Distrito</th>
                    <th>Sala</th>
                    <th>CUIJ</th>
                    <th>Carátula</th>
                    <th>Tipo de Audiencia</th>
                    <th>Juez</th>
                    <th>Fiscal</th>
                    <th>Defensor</th>
                    <th>Fecha</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let audiencia of audienciasFiltradas">
                    <td>{{ audiencia.hora }}</td>
                    <td>{{ audiencia.distrito }}</td>
                    <td>{{ audiencia.sala }}</td>
                    <td>{{ audiencia.cuij }}</td>
                    <td>{{ audiencia.aud_caratula }}</td>
                    <td>{{ audiencia.tipo }}</td>
                    <td>{{ audiencia.juez }}</td>
                    <td>{{ audiencia.fiscal }}</td>
                    <td>{{ audiencia.defensor }}</td>
                    <td>{{ audiencia.fecha | date:'dd-MM-yyyy' }}</td>
                    <td>{{ audiencia.estado }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


<div class="container">
    <button class="btn btn-outline-secondary">Volver</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
